<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Scanner</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { 
            background-color: #000; 
            color: #fff; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            font-family: sans-serif;
        }
    </style>
</head>
<body>
    <p id="status">Запуск нативного сканера...</p>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // Функция обработки результата
        function handleScan(text) {
            // Закрываем сканер
            tg.closeScanQrPopup();
            
            // Отправляем данные боту
            tg.sendData(text);
        }

        // Запускаем нативный сканер Телеграма
        // text: надпись внизу сканера
        tg.showScanQrPopup({
            text: 'Наведи камеру на штрих-код'
        }, function (text) {
            // Эта функция вызывается, когда код найден
            handleScan(text);
            
            // Возвращаем true, чтобы сканер закрылся (иногда нужно закрывать вручную выше)
            return true;
        });

    </script>
</body>
</html>
